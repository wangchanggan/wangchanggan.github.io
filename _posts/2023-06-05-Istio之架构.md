---
layout:     post
title:      Istio之架构
date:       2023-06-05
catalog: true
tags:
    - Istio
---

# 组成
Istio 服务网格从逻辑上分为数据平面和控制平面。

* 数据平面：由一组智能代理（Envoy）组成，被部署为 Sidecar。这些代理负责协调和控制微服务之间的所有网络通信。它们还收集和报告所有网格流量的遥测数据。
* 控制平面：管理并配置代理来进行流量路由。

![](/img/in-post/Istio/architecture.png)

## 控制面组件
Istiod是控制面唯一的单体应用，由原本独立的Pilot、Citadel、Galley、Sidecar-injector合并而成。
### Pilot
控制枢纽，负责服务发现和配置管理。
### Citadel
核心安全组件，提供了自动生成、分发、轮换与撤销密钥和证书的功能。
### Galley
服务网格控制面负责配置管理的组件。
### Sidecar-injector
负责自动注入的组件。
## 数据面组件
### Envoy
每个微服务的 Sidecar 代理，用于处理集群中服务之间以及从服务到外部服务的入口/出口流量。代理形成一个安全的微服务网格，提供一组丰富的功能，如发现、丰富的第7层路由、断路器、策略执行和遥测记录/报告功能。
### ingress-gateway
接收服务网格入口流量的网关组件。
### engress-gateway
接收服务网格出口流量的网关组件。
